<!doctype html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>狼人杀 - 多人在线游戏</title>
  <link rel="stylesheet" href="styles.css?v=10" />
</head>

<body>
  <div id="app">
    <!-- 登录/大厅界面 -->
    <div id="lobby" class="screen active">
      <div class="logo">
        <h1>🐺 狼人杀</h1>
        <p>多人在线游戏</p>
      </div>

      <div class="login-form" id="loginForm">
        <input type="text" id="playerName" placeholder="输入你的昵称" maxlength="10" />
        <button id="joinBtn" class="btn primary">进入游戏</button>
      </div>

      <div class="lobby-actions" id="lobbyActions" style="display: none">
        <p class="welcome">
          欢迎，
          <span id="displayName"></span>
        </p>
        <button id="createRoomBtn" class="btn primary">创建房间</button>
        <div class="join-room">
          <input type="text" id="roomIdInput" placeholder="房间号" maxlength="6" />
          <button id="joinRoomBtn" class="btn secondary">加入房间</button>
        </div>

        <!-- 房间列表 -->
        <div class="room-list-section">
          <div class="room-list-header">
            <h3 style="margin-right: 10px">可加入的房间</h3>
            <button id="refreshRoomsBtn" class="refresh-btn" title="刷新">🔄</button>
          </div>
          <div class="room-list" id="roomList">
            <p class="no-rooms">暂无可用房间，创建一个吧！</p>
          </div>
        </div>
      </div>
    </div>

    <!-- 房间等待界面 -->
    <div id="room" class="screen">
      <div class="room-header">
        <h2>
          房间:
          <span id="roomId"></span>
        </h2>
        <button id="leaveRoomBtn" class="btn danger">离开房间</button>
      </div>

      <div class="players-list">
        <h3>玩家列表</h3>
        <ul id="playersList"></ul>
      </div>

      <div class="room-actions" id="hostActions" style="display: none">
        <button id="addAIBtn" class="btn secondary">➕ 添加 AI 玩家</button>
        <button id="removeAIBtn" class="btn secondary">➖ 减少 AI 玩家</button>
        <button id="startGameBtn" class="btn primary">开始游戏</button>
      </div>

      <div class="player-config">
        <p>支持人数: 6, 8, 9, 10, 12 人</p>
      </div>
    </div>

    <!-- 游戏主界面 -->
    <div id="game" class="screen">
      <div class="game-header">
        <div class="phase-info">
          <span id="dayNumber">第 1 天</span>
          <span id="phaseIcon" class="phase-icon">☀️</span>
          <span id="phaseName">白天</span>
          <span id="countdown" class="countdown" style="display: none">⏱ 30秒</span>
          <span id="pausedIndicator" class="paused-indicator" style="display: none">⏸️ 已暂停</span>
        </div>
        <div class="game-controls">
          <span id="myRole">你的角色</span>
          <button id="pauseGameBtn" class="btn-icon" title="暂停游戏" style="display: none">⏸️</button>
          <button id="resumeGameBtn" class="btn-icon" title="恢复游戏" style="display: none">▶️</button>
          <button id="exitGameBtn" class="btn-icon danger" title="退出游戏">🚪</button>
        </div>
      </div>

      <div class="game-content">
        <!-- 玩家列表区域 -->
        <div class="players-section">
          <div class="players-grid" id="playersGrid"></div>
        </div>

        <!-- 操作和聊天区域 -->
        <div class="game-bottom">
          <!-- 操作面板区域 -->
          <div class="panels-container panels-placeholder">
            <div class="no-action-placeholder" id="noActionPlaceholder">
              <p>🎮 暂无操作</p>
            </div>
            <div class="action-panel" id="actionPanel" style="display: none">
              <h3 id="actionTitle">请选择目标</h3>
              <div class="action-targets" id="actionTargets"></div>
              <div class="action-buttons">
                <button id="confirmActionBtn" class="btn primary">确认</button>
                <button id="skipActionBtn" class="btn secondary">跳过</button>
              </div>
            </div>

            <div class="vote-panel" id="votePanel" style="display: none">
              <h3>投票放逐</h3>
              <div class="vote-candidates" id="voteCandidates"></div>
              <button id="confirmVoteBtn" class="btn primary">确认投票</button>
            </div>
          </div>

          <!-- 聊天面板 -->
          <div class="chat-panel">
            <div class="messages" id="messages"></div>
            <div class="chat-input">
              <input type="text" id="chatInput" placeholder="发送消息..." />
              <button id="sendChatBtn" class="btn primary">发送</button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- 游戏结束覆盖层 -->
    <div id="gameOverModal" class="modal game-over-modal" style="display: none">
      <div class="modal-content game-over-content">
        <h1 id="winnerText">游戏结束</h1>
        <p id="winReason"></p>
        <div class="final-roles" id="finalRoles"></div>
        <div class="game-over-actions">
          <button id="viewHistoryBtn" class="btn secondary">查看复盘</button>
          <button id="backToLobbyBtn" class="btn primary">返回大厅</button>
        </div>
      </div>
    </div>

    <!-- 通用结果弹窗 -->
    <div id="resultModal" class="modal" style="display: none">
      <div class="modal-content">
        <h2 id="resultTitle">行动结果</h2>
        <p id="resultMessage" class="result-message"></p>
        <button id="closeResultBtn" class="btn primary">确定</button>
      </div>
    </div>

    <!-- 猎人开枪弹窗 -->
    <div id="hunterModal" class="modal" style="display: none">
      <div class="modal-content">
        <h2>猎人开枪！</h2>
        <p>你已死亡，请选择一名玩家带走</p>
        <div id="hunterTargets" class="action-targets"></div>
        <button id="hunterShootBtn" class="btn danger">开枪</button>
      </div>
    </div>
  </div>

  <div id="toast" class="toast"></div>

  <script src="client.js?v=11"></script>
</body>

</html>